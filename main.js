!function(){"use strict";var e=class{constructor(e,t){var s,r,i;s=this,i=()=>this._hasInvalidInput(this._inputElements)?this.disableButton():this.enableButton(),(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r="_toggleButtonState"))in s?Object.defineProperty(s,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[r]=i,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this.disableButton(),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}};var t=class{constructor(e){let{data:t,selector:s,handlePreview:r,handleLike:i,handleDelete:n}=e;var o,a,l;o=this,l=()=>{this._element.remove(),this._element=null},(a=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(a="handleDeleteButton"))in o?Object.defineProperty(o,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[a]=l,this._name=t.name,this._link=t.link,this._cardSelector=s,this._handlePreview=r,this._likes=t.likes,this._cardId=t._id,this._userId=t.userId,this._ownerId=t.owner._id,this._handleLike=i,this._handleDelete=n}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".cards__content").cloneNode(!0)}getCardView(){return this._element=this._getTemplate(),this._cardElementImage=this._element.querySelector(".cards__image"),this._cardElementTitle=this._element.querySelector(".cards__title"),this._cardElementImage.src=this._link,this._cardElementImage.alt=this._name,this._cardElementTitle.textContent=this._name,this._deleteButton=this._element.querySelector(".cards__delete"),this._likeButton=this._element.querySelector(".cards__like-button"),this._likeCounter=this._element.querySelector(".cards__like-counter"),this.showLikes(this._likes),this._removeDeleteButton(),this._setEventListenersCard(),this._element}_setEventListenersCard(){this._deleteButton.addEventListener("click",(()=>this._handleDelete(this))),this._likeButton.addEventListener("click",(()=>this._handleLike(this))),this._cardElementImage.addEventListener("click",(()=>this._handlePreview({name:this._name,link:this._link})))}isLiked(){return this._likes.some((e=>e._id===this._userId))}showLikes(e){this._likes=e||[],this._likeCounter.textContent=this._likes.length,this._handleLikeButton()}_handleLikeButton(){this.isLiked()?this._likeButton.classList.add("cards__like-active"):this._likeButton.classList.remove("cards__like-active")}_removeDeleteButton(){this._userId!==this._ownerId&&this._deleteButton.remove()}};class s{constructor(e,t){let{items:s,renderer:r}=e;this._initialArray=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._initialArray.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class r{constructor(e){let{popupSelector:t}=e;this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}_handleEscClose(e){e.preventDefault(),"Escape"===e.key&&this.close()}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}setEventListeners(){this._popup.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal__close-button")||e.target.classList.contains("modal_opened"))&&this.close()}))}}class i extends r{constructor(e){let{popupSelector:t,handleFormSubmit:s,resetOnClose:r}=e;var i,n,o;super({popupSelector:t}),i=this,o=e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())},(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="_handleSubmit"))in i?Object.defineProperty(i,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[n]=o,this._handleFormSubmit=s,this._resetOnClose=r,this._form=this._popup.querySelector(".modal__form"),this._inputList=this._popup.querySelectorAll(".modal__input"),this._formButton=this._popup.querySelector(".modal__button"),this._formButtonText=this._formButton.textContent}_getInputValues(){const e={};return this._inputList.forEach((t=>e[t.name]=t.value)),e}setEventListeners(){this._form.addEventListener("submit",this._handleSubmit),super.setEventListeners()}close(){this._resetOnClose&&this._form.reset(),super.close()}setSubmitText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._formButton.textContent=e?t:this._formButtonText}}const n={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_error",errorClass:"modal__error_visible"},o="#edit-modal",a="#add-modal",l="#avatar-modal",u=".cards__list",h=document.querySelector(o),d=document.querySelector(a),c=document.querySelector(l),_=document.querySelector("#edit-profile"),m=document.querySelector("#btn-add-card"),p=document.querySelector("#btn-avatar");document.querySelector(u),document.querySelector("#image-logo").src="4e8e0a1d604782a0dff8.svg";const v=new class{constructor(e,t){this._baseUrl=e,this._headers=t}_handleServerResponse(e){if(e.ok)return e.json();Promise.reject(e.status)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._handleServerResponse)}getUserInfo(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then(this._handleServerResponse)}editUserInfo(e){return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._handleServerResponse)}editAvatar(e){return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(this._handleServerResponse)}postCard(e){return fetch(this._baseUrl+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._handleServerResponse)}deleteCard(e){return fetch(this._baseUrl+"/cards/"+e,{method:"DELETE",headers:this._headers}).then(this._handleServerResponse)}showLikes(e){return fetch(`${this._baseUrl}/cards/likes${e}`,{headers:this.headers}).then(this._handleServerResponse)}addLikes(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this._headers}).then(this._handleServerResponse)}removeLikes(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this._headers}).then(this._handleServerResponse)}}("https://around.nomoreparties.co/v1/group-12",{authorization:"77fde786-44a3-44dd-ae6e-76f3a1c5cf68","Content-Type":"application/json"});let b=null,S=null;const f=new class{constructor(e){let{userNameSelector:t,userJobSelector:s,userAvatarSelector:r}=e;this._userName=document.querySelector(t),this._userJob=document.querySelector(s),this._userAvatar=document.querySelector(r)}getUserInfo(){return{userName:this._userName.textContent,userJob:this._userJob.textContent,userAvatar:this._userAvatar.src}}setUserInfo(e){let{name:t,about:s,avatar:r}=e;this._userName.textContent=t,this._userJob.textContent=s,r&&(this._userAvatar.src=r)}}({userNameSelector:"#prof-title",userJobSelector:"#prof-subtitle",userAvatarSelector:"#avatar-image"});function y(e,s){const r=new t({data:{...e,userId:s},selector:"#card-template",handlePreview:()=>{w.open(e)},handleLike:e=>{r.isLiked()?v.removeLikes(e._cardId).then((e=>{r.showLikes(e.likes)})).catch((e=>{console.log(`An error has occured ${e}`)})):v.addLikes(e._cardId).then((e=>{r.showLikes(e.likes)})).catch((e=>{console.log(`An error has occured ${e}`)}))},handleDelete:e=>{B.confirmDelete((()=>{B.setSubmitText(!0,"Deleting..."),v.deleteCard(e._cardId).then((()=>{e.handleDeleteButton(),B.close()})).catch((e=>{console.log(`An error has occured ${e}`)})).finally((()=>B.setSubmitText(!1)))})),B.open()}});return r.getCardView()}Promise.all([v.getUserInfo(),v.getInitialCards()]).then((e=>{let[t,r]=e;S=t._id,f.setUserInfo({name:t.name,about:t.about,avatar:t.avatar}),b=new s({items:r,renderer:e=>{b.addItem(y(e,S))}},u),b.renderItems()})).catch((e=>{console.log(`Error: ${e}`)}));const E=new e(n,h);E.enableValidation();const g=new e(n,d);g.enableValidation();const L=new e(n,c);L.enableValidation();const k=new i({popupSelector:o,handleFormSubmit:e=>{k.setSubmitText(!0),v.editUserInfo(e).then((e=>{f.setUserInfo(e),k.close()})).catch((e=>{console.log(`An error has occured ${e}`)})).finally((()=>k.setSubmitText(!1)))},resetOnClose:!0});k.setEventListeners();const C=new i({popupSelector:a,handleFormSubmit:e=>{C.setSubmitText(!0,"Creating..."),v.postCard(e).then((e=>{b.addItem(y(e,S)),C.close()})).catch((e=>{console.log(`An error has occured ${e}`)})).finally((()=>C.setSubmitText(!1)))},resetOnClose:!0});C.setEventListeners();const I=new i({popupSelector:l,handleFormSubmit:e=>{I.setSubmitText(!0),v.editAvatar(e).then((e=>{f.setUserInfo(e),I.close()})).catch((e=>console.log(`An error has occured ${e}`))).finally((()=>I.setSubmitText(!1)))},resetOnClose:!0});I.setEventListeners();const w=new class extends r{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._previewImage=this._popup.querySelector(".modal__preview-image"),this._previewTitle=this._popup.querySelector(".modal__preview-text")}open(e){let{name:t,link:s}=e;this._previewImage.src=s,this._previewImage.alt=`Photo of ${t}`,this._previewTitle.textContent=t,super.open()}}({popupSelector:"#preview-modal"});w.setEventListeners();const B=new class extends r{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._modalForm=this._popup.querySelector(".modal__form"),this._submitButton=this._popup.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}setSubmitText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._submitButtonText}confirmDelete(e){this._handleFormSubmit=e}setEventListeners(){super.setEventListeners(),this._modalForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}}({popupSelector:"#confirm-modal"});B.setEventListeners(),p.addEventListener("click",(()=>{L.resetValidation(),I.open()})),m.addEventListener("click",(()=>{g.resetValidation(),C.open()})),_.addEventListener("click",(()=>{const{userName:e,userJob:t}=f.getUserInfo();document.querySelector("#name-input").value=e,document.querySelector("#job-input").value=t,E.resetValidation(),k.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsKSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSAnJztcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbGVtZW50cykpIHtcbiAgICAgIHJldHVybiB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZW5hYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuXG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHNlbGVjdG9yLCBoYW5kbGVQcmV2aWV3LCBoYW5kbGVMaWtlLCBoYW5kbGVEZWxldGUgfSkge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVQcmV2aWV3ID0gaGFuZGxlUHJldmlldztcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fdXNlcklkID0gZGF0YS51c2VySWQ7XG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xuICAgIHRoaXMuX2hhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZSA9IGhhbmRsZURlbGV0ZTtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fY29udGVudCcpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgZ2V0Q2FyZFZpZXcoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19pbWFnZScpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50VGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fdGl0bGUnKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50VGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19kZWxldGUnKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2xpa2UtYnV0dG9uJyk7XG4gICAgdGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fbGlrZS1jb3VudGVyJyk7XG5cbiAgICB0aGlzLnNob3dMaWtlcyh0aGlzLl9saWtlcyk7XG4gICAgdGhpcy5fcmVtb3ZlRGVsZXRlQnV0dG9uKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnNDYXJkKCk7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnNDYXJkKCkge1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGUodGhpcylcbiAgICApO1xuXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUxpa2UodGhpcykpO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVQcmV2aWV3KHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KVxuICAgICk7XG4gIH1cblxuICBpc0xpa2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChpdGVtKSA9PiBpdGVtLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcbiAgfVxuXG4gIHNob3dMaWtlcyhkYXRhKSB7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhIHx8IFtdO1xuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkc19fbGlrZS1hY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkc19fbGlrZS1hY3RpdmUnKTtcbiAgICB9XG4gIH1cblxuICBfcmVtb3ZlRGVsZXRlQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX293bmVySWQpIHtcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVEZWxldGVCdXR0b24gPSAoKSA9PiB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2luaXRpYWxBcnJheSA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdtb2RhbF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbF9fY2xvc2UtYnV0dG9uJykgfHxcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbF9vcGVuZWQnKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQsIHJlc2V0T25DbG9zZSB9KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX3Jlc2V0T25DbG9zZSA9IHJlc2V0T25DbG9zZTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLm1vZGFsX19mb3JtJyk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsX19pbnB1dCcpO1xuICAgIHRoaXMuX2Zvcm1CdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J1dHRvbicpO1xuICAgIHRoaXMuX2Zvcm1CdXR0b25UZXh0ID0gdGhpcy5fZm9ybUJ1dHRvbi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4gKGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9oYW5kbGVTdWJtaXQgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICB9O1xuXG4gIGNsb3NlKCkge1xuICAgIGlmICh0aGlzLl9yZXNldE9uQ2xvc2UpIHtcbiAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB9XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIHNldFN1Ym1pdFRleHQoc3VibWl0LCBzdWJtaXRUZXh0ID0gJ1NhdmluZy4uLicpIHtcbiAgICBpZiAoc3VibWl0KSB7XG4gICAgICB0aGlzLl9mb3JtQnV0dG9uLnRleHRDb250ZW50ID0gc3VibWl0VGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZm9ybUJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2Zvcm1CdXR0b25UZXh0O1xuICAgIH1cbiAgfVxufVxuIiwiY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogJy5tb2RhbF9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5tb2RhbF9fYnV0dG9uJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ21vZGFsX19idXR0b25fZGlzYWJsZWQnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdtb2RhbF9faW5wdXRfZXJyb3InLFxuICBlcnJvckNsYXNzOiAnbW9kYWxfX2Vycm9yX3Zpc2libGUnLFxufTtcblxuY29uc3Qgc2VsZWN0b3JzID0ge1xuICBuYW1lSW5wdXQ6ICcjbmFtZS1pbnB1dCcsXG4gIGpvYklucHV0OiAnI2pvYi1pbnB1dCcsXG4gIHByb2ZUaXRsZTogJyNwcm9mLXRpdGxlJyxcbiAgcHJvZlN1YnRpdGxlOiAnI3Byb2Ytc3VidGl0bGUnLFxuICBwcm9mQXZhdGFyOiAnI2F2YXRhci1pbWFnZScsXG4gIHByZXZpZXdNb2RhbDogJyNwcmV2aWV3LW1vZGFsJyxcbiAgY2FyZFRlbXBsYXRlOiAnI2NhcmQtdGVtcGxhdGUnLFxuICBlZGl0TW9kYWw6ICcjZWRpdC1tb2RhbCcsXG4gIGFkZE1vZGFsOiAnI2FkZC1tb2RhbCcsXG4gIGNvbmZpcm1Nb2RhbDogJyNjb25maXJtLW1vZGFsJyxcbiAgYXZhdGFyTW9kYWw6ICcjYXZhdGFyLW1vZGFsJyxcbiAgYnRuUHJvZmlsZTogJyNlZGl0LXByb2ZpbGUnLFxuICBidG5BZGRDYXJkOiAnI2J0bi1hZGQtY2FyZCcsXG4gIGJ0bkF2YXRhcjogJyNidG4tYXZhdGFyJyxcbiAgY2FyZHNMaXN0OiAnLmNhcmRzX19saXN0Jyxcbn07XG5cbmNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmVkaXRNb2RhbCk7XG5jb25zdCBhZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmFkZE1vZGFsKTtcbmNvbnN0IGF2YXRhck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuYXZhdGFyTW9kYWwpO1xuY29uc3QgYnRuUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmJ0blByb2ZpbGUpO1xuY29uc3QgYnRuQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmJ0bkFkZENhcmQpO1xuY29uc3QgYnRuQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuYnRuQXZhdGFyKTtcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmNhcmRzTGlzdCk7XG5cbmV4cG9ydCB7XG4gIGVkaXRNb2RhbCxcbiAgYnRuUHJvZmlsZSxcbiAgYnRuQXZhdGFyLFxuICBhZGRNb2RhbCxcbiAgYnRuQWRkQ2FyZCxcbiAgY2FyZHNMaXN0LFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBzZWxlY3RvcnMsXG4gIGF2YXRhck1vZGFsLFxufTtcbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IGxvZ29TcmMgZnJvbSAnLi4vaW1hZ2VzL2xvZ28uc3ZnJztcblxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQge1xuICBlZGl0TW9kYWwsXG4gIGJ0blByb2ZpbGUsXG4gIGFkZE1vZGFsLFxuICBidG5BZGRDYXJkLFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBzZWxlY3RvcnMsXG4gIGJ0bkF2YXRhcixcbiAgYXZhdGFyTW9kYWwsXG59IGZyb20gJy4uL3V0aWxzL3V0aWxzLmpzJztcblxuLy8gaW1hZ2VzXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW1hZ2UtbG9nbycpLnNyYyA9IGxvZ29TcmM7XG5cbi8vIGFwaVxuY29uc3QgYXBpID0gbmV3IEFwaSgnaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMicsIHtcbiAgYXV0aG9yaXphdGlvbjogJzc3ZmRlNzg2LTQ0YTMtNDRkZC1hZTZlLTc2ZjNhMWM1Y2Y2OCcsXG4gICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG59KTtcblxubGV0IGNhcmRTZWN0aW9uID0gbnVsbDtcbmxldCB1c2VySWQgPSBudWxsO1xuXG4vLyB1c2VyIGluZm9cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWVTZWxlY3Rvcjogc2VsZWN0b3JzLnByb2ZUaXRsZSxcbiAgdXNlckpvYlNlbGVjdG9yOiBzZWxlY3RvcnMucHJvZlN1YnRpdGxlLFxuICB1c2VyQXZhdGFyU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9mQXZhdGFyLFxufSk7XG5cbi8vIHNlY3Rpb25cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbiAgLnRoZW4oKFtkYXRhLCBjYXJkc10pID0+IHtcbiAgICB1c2VySWQgPSBkYXRhLl9pZDtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICBhYm91dDogZGF0YS5hYm91dCxcbiAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIsXG4gICAgfSk7XG5cbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICBpdGVtczogY2FyZHMsXG4gICAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKHJlbmRlckNhcmQoY2FyZERhdGEsIHVzZXJJZCkpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHNlbGVjdG9ycy5jYXJkc0xpc3RcbiAgICApO1xuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyb3J9YCk7XG4gIH0pO1xuXG4vLyByZW5kZXIgY2FyZHNcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEsIHVzZXJJZCkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgIGRhdGE6IHsgLi4uY2FyZERhdGEsIHVzZXJJZCB9LFxuICAgIHNlbGVjdG9yOiAnI2NhcmQtdGVtcGxhdGUnLFxuICAgIGhhbmRsZVByZXZpZXc6ICgpID0+IHtcbiAgICAgIHBvcHVwSW1hZ2VQcmV2aWV3Lm9wZW4oY2FyZERhdGEpO1xuICAgIH0sXG4gICAgaGFuZGxlTGlrZTogKGRhdGEpID0+IHtcbiAgICAgIGlmIChjYXJkLmlzTGlrZWQoKSkge1xuICAgICAgICBhcGlcbiAgICAgICAgICAucmVtb3ZlTGlrZXMoZGF0YS5fY2FyZElkKVxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIGNhcmQuc2hvd0xpa2VzKHJlcy5saWtlcyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgQW4gZXJyb3IgaGFzIG9jY3VyZWQgJHtlcnJvcn1gKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC5hZGRMaWtlcyhkYXRhLl9jYXJkSWQpXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgY2FyZC5zaG93TGlrZXMocmVzLmxpa2VzKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBbiBlcnJvciBoYXMgb2NjdXJlZCAke2Vycm9yfWApO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgaGFuZGxlRGVsZXRlOiAoY2FyZCkgPT4ge1xuICAgICAgY29uZmlybWF0aW9uUG9wdXAuY29uZmlybURlbGV0ZSgoKSA9PiB7XG4gICAgICAgIGNvbmZpcm1hdGlvblBvcHVwLnNldFN1Ym1pdFRleHQodHJ1ZSwgJ0RlbGV0aW5nLi4uJyk7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC5kZWxldGVDYXJkKGNhcmQuX2NhcmRJZClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjYXJkLmhhbmRsZURlbGV0ZUJ1dHRvbigpO1xuICAgICAgICAgICAgY29uZmlybWF0aW9uUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBbiBlcnJvciBoYXMgb2NjdXJlZCAke2Vycm9yfWApO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZpbmFsbHkoKCkgPT4gY29uZmlybWF0aW9uUG9wdXAuc2V0U3VibWl0VGV4dChmYWxzZSkpO1xuICAgICAgfSk7XG4gICAgICBjb25maXJtYXRpb25Qb3B1cC5vcGVuKCk7XG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBjYXJkLmdldENhcmRWaWV3KCk7XG59XG5cbi8vIHZhbGlkYXRpb25cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZWRpdE1vZGFsKTtcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBhZGRNb2RhbCk7XG5jYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBhdmF0YXJNb2RhbCk7XG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy8gcG9wdXAgd2l0aCBmb3JtOiBwcm9maWxlXG5jb25zdCBwcm9maWxlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLmVkaXRNb2RhbCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICBwcm9maWxlRm9ybS5zZXRTdWJtaXRUZXh0KHRydWUpO1xuICAgIGFwaVxuICAgICAgLmVkaXRVc2VySW5mbyhkYXRhKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gICAgICAgIHByb2ZpbGVGb3JtLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgQW4gZXJyb3IgaGFzIG9jY3VyZWQgJHtlcnJvcn1gKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiBwcm9maWxlRm9ybS5zZXRTdWJtaXRUZXh0KGZhbHNlKSk7XG4gIH0sXG4gIHJlc2V0T25DbG9zZTogdHJ1ZSxcbn0pO1xucHJvZmlsZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gcG9wdXAgd2l0aCBmb3JtOiBhZGQgY2FyZFxuY29uc3QgY3JlYXRlQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5hZGRNb2RhbCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGNhcmREYXRhKSA9PiB7XG4gICAgY3JlYXRlQ2FyZEZvcm0uc2V0U3VibWl0VGV4dCh0cnVlLCAnQ3JlYXRpbmcuLi4nKTtcbiAgICBhcGlcbiAgICAgIC5wb3N0Q2FyZChjYXJkRGF0YSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0ocmVuZGVyQ2FyZChkYXRhLCB1c2VySWQpKTtcbiAgICAgICAgY3JlYXRlQ2FyZEZvcm0uY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBBbiBlcnJvciBoYXMgb2NjdXJlZCAke2Vycm9yfWApO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IGNyZWF0ZUNhcmRGb3JtLnNldFN1Ym1pdFRleHQoZmFsc2UpKTtcbiAgfSxcbiAgcmVzZXRPbkNsb3NlOiB0cnVlLFxufSk7XG5jcmVhdGVDYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBwb3B1cCB3aXRoIGZvcm06IGVkaXQgYXZhdGFyXG5jb25zdCBuZXdBdmF0YXJNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLmF2YXRhck1vZGFsLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIG5ld0F2YXRhck1vZGFsLnNldFN1Ym1pdFRleHQodHJ1ZSk7XG4gICAgYXBpXG4gICAgICAuZWRpdEF2YXRhcihkYXRhKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gICAgICAgIG5ld0F2YXRhck1vZGFsLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coYEFuIGVycm9yIGhhcyBvY2N1cmVkICR7ZXJyb3J9YCkpXG4gICAgICAuZmluYWxseSgoKSA9PiBuZXdBdmF0YXJNb2RhbC5zZXRTdWJtaXRUZXh0KGZhbHNlKSk7XG4gIH0sXG4gIHJlc2V0T25DbG9zZTogdHJ1ZSxcbn0pO1xubmV3QXZhdGFyTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gcG9wdXAgd2l0aCBpbWFnZVxuY29uc3QgcG9wdXBJbWFnZVByZXZpZXcgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoe1xuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMucHJldmlld01vZGFsLFxufSk7XG5wb3B1cEltYWdlUHJldmlldy5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBwb3B1cCB3aXRoIGNvbmZpcm1hdGlvblxuY29uc3QgY29uZmlybWF0aW9uUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLmNvbmZpcm1Nb2RhbCxcbn0pO1xuY29uZmlybWF0aW9uUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYnRuQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBhdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBuZXdBdmF0YXJNb2RhbC5vcGVuKCk7XG59KTtcblxuYnRuQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGNyZWF0ZUNhcmRGb3JtLm9wZW4oKTtcbn0pO1xuXG5idG5Qcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCB7IHVzZXJOYW1lLCB1c2VySm9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5uYW1lSW5wdXQpLnZhbHVlID0gdXNlck5hbWU7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmpvYklucHV0KS52YWx1ZSA9IHVzZXJKb2I7XG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwcm9maWxlRm9ybS5vcGVuKCk7XG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKGJhc2VVcmwsIGhlYWRlcnMpIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIF9oYW5kbGVTZXJ2ZXJSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9IGVsc2UgUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1cyk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy91c2Vycy9tZScsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XG4gIH1cblxuICBlZGl0VXNlckluZm8oZGF0YSkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy91c2Vycy9tZScsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbiAgfVxuXG4gIGVkaXRBdmF0YXIoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy91c2Vycy9tZS9hdmF0YXInLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XG4gIH1cblxuICBwb3N0Q2FyZChkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL2NhcmRzJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGxpbms6IGRhdGEubGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArICcvY2FyZHMvJyArIGNhcmRJZCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XG4gIH1cblxuICBzaG93TGlrZXMoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzJHtjYXJkSWR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpO1xuICB9XG5cbiAgYWRkTGlrZXMoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL2NhcmRzL2xpa2VzLycgKyBjYXJkSWQsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpO1xuICB9XG5cbiAgcmVtb3ZlTGlrZXMoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL2NhcmRzL2xpa2VzLycgKyBjYXJkSWQsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWVTZWxlY3RvciwgdXNlckpvYlNlbGVjdG9yLCB1c2VyQXZhdGFyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX3VzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJBdmF0YXJTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXNlck5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxuICAgICAgdXNlckpvYjogdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCxcbiAgICAgIHVzZXJBdmF0YXI6IHRoaXMuX3VzZXJBdmF0YXIuc3JjLFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl91c2VySm9iLnRleHRDb250ZW50ID0gYWJvdXQ7XG4gICAgaWYgKGF2YXRhcikge1xuICAgICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSBhdmF0YXI7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3ByZXZpZXctaW1hZ2UnKTtcbiAgICB0aGlzLl9wcmV2aWV3VGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3ByZXZpZXctdGV4dCcpO1xuICB9XG5cbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBgUGhvdG8gb2YgJHtuYW1lfWA7XG4gICAgdGhpcy5fcHJldmlld1RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcblxuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX21vZGFsRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZm9ybScpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fYnV0dG9uJyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIHNldFN1Ym1pdFRleHQoc3VibWl0LCBzdWJtaXRUZXh0ID0gJ1NhdmluZy4uLicpIHtcbiAgICBpZiAoc3VibWl0KSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBzdWJtaXRUZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xuICAgIH1cbiAgfVxuXG4gIGNvbmZpcm1EZWxldGUoY29uZmlybWF0aW9uKSB7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGNvbmZpcm1hdGlvbjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fbW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiZm9ybUVsIiwidGhpcyIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbGVtZW50cyIsImRpc2FibGVCdXR0b24iLCJlbmFibGVCdXR0b24iLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJpbnB1dExpc3QiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIl9yZWYiLCJkYXRhIiwic2VsZWN0b3IiLCJoYW5kbGVQcmV2aWV3IiwiaGFuZGxlTGlrZSIsImhhbmRsZURlbGV0ZSIsIl9lbGVtZW50IiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVQcmV2aWV3IiwiX2xpa2VzIiwibGlrZXMiLCJfY2FyZElkIiwiX2lkIiwiX3VzZXJJZCIsInVzZXJJZCIsIl9vd25lcklkIiwib3duZXIiLCJfaGFuZGxlTGlrZSIsIl9oYW5kbGVEZWxldGUiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRDYXJkVmlldyIsIl9jYXJkRWxlbWVudEltYWdlIiwiX2NhcmRFbGVtZW50VGl0bGUiLCJzcmMiLCJhbHQiLCJfZGVsZXRlQnV0dG9uIiwiX2xpa2VCdXR0b24iLCJfbGlrZUNvdW50ZXIiLCJzaG93TGlrZXMiLCJfcmVtb3ZlRGVsZXRlQnV0dG9uIiwiX3NldEV2ZW50TGlzdGVuZXJzQ2FyZCIsImlzTGlrZWQiLCJzb21lIiwiaXRlbSIsImxlbmd0aCIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pbml0aWFsQXJyYXkiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwia2V5IiwiY2xvc2UiLCJvcGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInJlc2V0T25DbG9zZSIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfcmVzZXRPbkNsb3NlIiwiX2lucHV0TGlzdCIsIl9mb3JtQnV0dG9uIiwiX2Zvcm1CdXR0b25UZXh0IiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwiX2hhbmRsZVN1Ym1pdCIsInJlc2V0Iiwic2V0U3VibWl0VGV4dCIsInN1Ym1pdCIsInN1Ym1pdFRleHQiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJ2YWxpZGF0aW9uQ29uZmlnIiwic2VsZWN0b3JzIiwiZWRpdE1vZGFsIiwiYWRkTW9kYWwiLCJhdmF0YXJNb2RhbCIsImJ0blByb2ZpbGUiLCJidG5BZGRDYXJkIiwiYnRuQXZhdGFyIiwiYXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2hhbmRsZVNlcnZlclJlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsImdldFVzZXJJbmZvIiwiZWRpdFVzZXJJbmZvIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImVkaXRBdmF0YXIiLCJhdmF0YXIiLCJwb3N0Q2FyZCIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJhZGRMaWtlcyIsInJlbW92ZUxpa2VzIiwiYXV0aG9yaXphdGlvbiIsImNhcmRTZWN0aW9uIiwidXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckpvYlNlbGVjdG9yIiwidXNlckF2YXRhclNlbGVjdG9yIiwiX3VzZXJOYW1lIiwiX3VzZXJKb2IiLCJfdXNlckF2YXRhciIsInVzZXJOYW1lIiwidXNlckpvYiIsInVzZXJBdmF0YXIiLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwicmVuZGVyQ2FyZCIsImNhcmREYXRhIiwiY2FyZCIsIkNhcmQiLCJwb3B1cEltYWdlUHJldmlldyIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiY29uZmlybWF0aW9uUG9wdXAiLCJjb25maXJtRGVsZXRlIiwiaGFuZGxlRGVsZXRlQnV0dG9uIiwiZmluYWxseSIsImFsbCIsImNhcmRzIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiY2FyZEZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwicHJvZmlsZUZvcm0iLCJjcmVhdGVDYXJkRm9ybSIsIm5ld0F2YXRhck1vZGFsIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3VGl0bGUiLCJfbW9kYWxGb3JtIiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJjb25maXJtYXRpb24iLCJldmVudCJdLCJzb3VyY2VSb290IjoiIn0=